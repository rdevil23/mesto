(()=>{"use strict";const e=document.querySelector(".add-popup"),t=document.querySelector(".popup__edit-form"),s=e.querySelector(".add-form"),r=document.querySelector(".avatar-form"),n=document.querySelector(".profile__edit-btn"),i=document.querySelector(".profile__add-btn"),o=document.querySelector(".profile__avatar-edit-btn"),a=(t.querySelector(".popup__input_type_name"),t.querySelector(".popup__input_type_job"),document.querySelector(".profile__name")),l=document.querySelector(".profile__job"),h=document.querySelector(".profile__avatar"),u={formSelector:".popup__edit-form",inputSelector:".popup__input",submitButtonSelector:".popup__save-btn",inactiveButtonClass:"popup__save-btn_inactive",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_active"};class _{constructor(e){let{cardData:t,templateSelector:s,userId:r,handleCardClick:n,handleLikeCardClick:i,handleRemoveCardClick:o}=e;this._name=t.name,this._link=t.link,this._likes=t.likes,this._cardId=t._id,this._templateSelector=s,this._userId=r,this._isUserCard=r===t.owner._id,this._handleCardClick=n,this._handleLikeCardClick=i,this._handleRemoveCardClick=o}_getTemplate(){return document.querySelector(this._templateSelector).content.querySelector(".elements__item").cloneNode(!0)}generateCard(){return this._element=this._getTemplate(),this._elementImg=this._element.querySelector(".elements__img"),this._element.querySelector(".elements__text").textContent=this._name,this._elementImg.src=this._link,this._elementImg.alt="Картинка "+this._name,this._buttonDelete=this._element.querySelector(".elements__delete"),this._buttonLike=this._element.querySelector(".elements__like"),this._likesCounter=this._element.querySelector(".elements__likes-counter"),this._likesCounter.textContent=this._likes.length,this._setEventListeners(),this._countLikes(),this._element}_setEventListeners(){this._isUserCard?this._buttonDelete.addEventListener("click",(e=>{this._handleRemoveCardClick(e)})):(this._buttonDelete.remove(),this._buttonDelete=null),this._buttonLike.addEventListener("click",(()=>{this._handleLikeCardClick()})),this._elementImg.addEventListener("click",(()=>{this._handleCardClick(this._name,this._link)}))}_countLikes(){this._checkUserLikes()?this.addLike():this.removeLike()}_checkUserLikes(){return this._likes.some((e=>e._id===this._userId))}addLike=()=>{this._element.querySelector(".elements__like").classList.add("elements__like_active"),this.isLiked=!0};removeLike=()=>{this._element.querySelector(".elements__like").classList.remove("elements__like_active"),this.isLiked=!1};updatelikes(e){this._likesCounter.textContent=e.length}getCardId(){return this._cardId}}class c{constructor(e,t){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t,this._inputList=t.querySelectorAll(this._inputSelector),this._submitButton=t.querySelector(this._submitButtonSelector)}_hasInvalidInput=()=>Array.from(this._inputList).some((e=>!e.validity.valid));_showError=function(e,t){t.classList.add(this._inputErrorClass),e.textContent=t.validationMessage,e.classList.add(this._errorClass)};_hideError=function(e,t){t.classList.remove(this._inputErrorClass),e.textContent="",e.classList.remove(this._errorClass)};_checkInputValidity=e=>{const t=this._form.querySelector(`#${e.id}-error`);return e.validity.valid?this._hideError(t,e):this._showError(t,e)};_toggleButtonState(){this._hasInvalidInput(this._inputList)?this._disableButton():(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.removeAttribute("disabled"))}_disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.setAttribute("disabled",!0)}_setValidListeners(){this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._setValidListeners()}removeInputErrors(){this._inputList.forEach((e=>{const t=this._form.querySelector(`#${e.id}-error`);e.validity.valid||this._hideError(t,e)})),this._disableButton()}}class d{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._buttonClose=this._popupElement.querySelector(".popup__close-btn"),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}_handleOverlayClose=e=>{(e.target.classList.contains("popup_opened")||e.target.classList.contains("popup__close-button"))&&this.close()};setEventListeners(){this._buttonClose.addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("mousedown",this._handleOverlayClose)}}class p extends d{constructor(e,t){super(e),this._handleSubmitForm=t,this._popupForm=this._popupElement.querySelector(".popup__edit-form"),this._inputList=this._popupElement.querySelectorAll(".popup__input"),this._submitButton=this._popupElement.querySelector(".popup__save-btn")}_getInputValues(){return this._inputValues={},this._inputList.forEach((e=>{this._inputValues[e.name]=e.value})),this._inputValues}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmitForm(this._getInputValues())}))}renderLoadingBtn(e){this._submitButton.textContent=e?"Сохранение...":"Сохранить"}close(){super.close(),this._popupForm.reset()}}const m=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_checkResponse(e){return e.ok?e.json():Promise.reject(`Ошибка: ${e.status} - не удалось установить подключение к api`)}getUserInfo(){return fetch(`${this._baseUrl}users/me`,{headers:this._headers}).then(this._checkResponse)}updateUserInfo(e){return fetch(`${this._baseUrl}users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then(this._checkResponse)}updateUserAvatar(e){return fetch(`${this._baseUrl}users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._checkResponse)}getCards(){return fetch(`${this._baseUrl}cards`,{headers:this._headers}).then(this._checkResponse)}addNewCard(e){let{name:t,link:s}=e;return fetch(`${this._baseUrl}cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then(this._checkResponse)}removeCard(e){return fetch(`${this._baseUrl}cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}likeCard(e){return fetch(`${this._baseUrl}cards/likes/${e}`,{method:"PUT",headers:this._headers}).then(this._checkResponse)}deleteCardLike(e){return fetch(`${this._baseUrl}cards/likes/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}}({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-66/",headers:{authorization:"aa38c948-6d23-4336-8d1a-1b31ad529250","Content-Type":"application/json"}}),v=new class{constructor(e){this._name=e.name,this._about=e.about,this._avatar=e.avatar}getUserInfo(){return{name:this._name.textContent,about:this._about.textContent}}setUserInfo(e){this._name.textContent=e.name,this._about.textContent=e.about,this._avatar.src=e.avatar,this._userId=e.userId}newUserInfo(e){let{name:t,about:s}=e;this._name.textContent=t,this._about.textContent=s}setUserAvatar(e){let{newUserAvatar:t}=e;this._avatar.src=t}getUserId(){return this._userId}}({name:a,about:l,avatar:h}),k=new class extends d{constructor(e){super(e),this._popupForm=this._popupElement.querySelector(".popup__confirm")}setSubmitHandler(e){this._formSubmit=e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._formSubmit()}))}}({popupSelector:".confirm-popup"});k.setEventListeners();const C=new class extends d{constructor(e){super(e),this._name=this._popupElement.querySelector(".popup__img-title"),this._image=this._popupElement.querySelector(".popup__img")}open(e,t){super.open(e,t),this._name.textContent=e,this._image.src=t,this._image.alt="Картинка "+e}}({popupSelector:".popup_type_open-img"});C.setEventListeners();const b=new c(u,t);b.enableValidation();const L=new c(u,r);L.enableValidation();const S=new c(u,s);S.enableValidation(),m.getUserInfo().then((e=>{const t=e;v.setUserInfo({name:t.name,about:t.about,avatar:t.avatar,userId:t._id})})).catch((e=>{console.log(`Ошибка при загрузке исходных данных: ${e}`)})),m.getCards().then((e=>{const t=e;E.renderItems(t)})).catch((e=>{console.log(`Ошибка при загрузке исходных данных: ${e}`)}));const E=new class{constructor(e,t){let{renderer:s}=e;this._renderer=s,this._container=document.querySelector(t)}renderItems(e){e.forEach((e=>{this.addItem(e)}))}addItem(e){const t=this._renderer(e);this._container.prepend(t)}}({renderer:e=>{const t=new _({cardData:e,templateSelector:"#elements-template",userId:v.getUserId(),handleCardClick:(e,t)=>{C.open(e,t)},handleLikeCardClick:()=>{t.isLiked?m.deleteCardLike(t.getCardId()).then((e=>{t.removeLike(),t.updatelikes(e.likes)})).catch((e=>{console.error(e)})):m.likeCard(t.getCardId()).then((e=>{t.addLike(),t.updatelikes(e.likes)})).catch((e=>{console.error(e)}))},handleRemoveCardClick:e=>{const s=e.target.closest(".elements__item");k.open(),k.setSubmitHandler((()=>{m.removeCard(t.getCardId()).then((()=>{s.remove(),k.close()})).catch((e=>{console.error(e)}))}))}});return t.generateCard()}},".elements__list"),y=new p({popupSelector:".avatar-popup"},(e=>{y.renderLoadingBtn(!0),m.updateUserAvatar({avatar:e.url}).then((e=>{v.setUserAvatar({newUserAvatar:e.avatar}),y.close(),r.reset()})).catch((e=>{console.error(e)})).finally((()=>{y.renderLoadingBtn(!1)}))}));y.setEventListeners(),o.addEventListener("click",(()=>{L.removeInputErrors(),y.open()}));const f=new p({popupSelector:".profile-popup"},(e=>{f.renderLoadingBtn(!0),m.updateUserInfo(e).then((e=>{v.newUserInfo(e),f.close()})).catch((e=>{console.log(`Ошибка: ${e} - не удалось обновить профиль`)})).finally((()=>{f.renderLoadingBtn(!1)}))}));f.setEventListeners(),n.addEventListener("click",(()=>{b.removeInputErrors();const e=v.getUserInfo();f.setInputValues(e),f.open()}));const g=new p({popupSelector:".add-popup"},(e=>{g.renderLoadingBtn(!0),m.addNewCard(e).then((e=>{E.addItem(e),g.close(),s.reset()})).catch((e=>{console.log(`Ошибка: ${e} - не удалось добавить новую карточку`)})).finally((()=>{g.renderLoadingBtn(!1)}))}));g.setEventListeners(),i.addEventListener("click",(()=>{S.removeInputErrors(),g.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBTSxHQUN4QyxJQUVOeUUsRUFBaUJyRixvQkFHakJoSCxFQUFRcUQsaUJBQWlCLFNBQVMsS0FDaEN3SCxFQUFrQjNFLG9CQUNsQixNQUFNZ0UsRUFBV0wsRUFBU2xCLGNBQzFCMEQsRUFBaUIzRSxlQUFld0MsR0FDaENtQyxFQUFpQjVGLE1BQU0sSUFJekIsTUFBTTZGLEVBQWUsSUFBSXJGLEVBQWMsQ0FBRWIsY0FBZSxlQUFpQm1HLElBQ3ZFRCxFQUFhMUUsa0JBQWlCLEdBQzlCRyxFQUNHdUIsV0FBV2lELEdBQ1gxRCxNQUFNMEQsSUFDTGxCLEVBQVlNLFFBQVFZLEdBQ3BCRCxFQUFhNUYsUUFDYjVHLEVBQVFnSSxPQUFPLElBRWhCa0QsT0FBT0MsSUFDTkMsUUFBUUMsSUFBSyxXQUFVRix5Q0FBNkMsSUFFckVtQixTQUFRLEtBQ1BFLEVBQWExRSxrQkFBaUIsRUFBTSxHQUNwQyxJQUdOMEUsRUFBYXRGLG9CQUdiL0csRUFBT29ELGlCQUFpQixTQUFTLEtBQy9CMEgsRUFBa0I3RSxvQkFDbEJvRyxFQUFhN0YsTUFBTSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvY2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL2Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9wb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL3BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9hcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy91c2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL3BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL3BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvc2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgYXBpQ29uZmlnID0ge1xyXG4gIGJhc2VVcmw6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTY2LycsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogJ2FhMzhjOTQ4LTZkMjMtNDMzNi04ZDFhLTFiMzFhZDUyOTI1MCcsXHJcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gIH0sXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgYWRkUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLXBvcHVwJyk7XHJcbmV4cG9ydCBjb25zdCBwb3B1cEVkaXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19lZGl0LWZvcm0nKTtcclxuZXhwb3J0IGNvbnN0IGFkZEZvcm0gPSBhZGRQb3B1cC5xdWVyeVNlbGVjdG9yKCcuYWRkLWZvcm0nKTtcclxuZXhwb3J0IGNvbnN0IGF2YXRhckZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXZhdGFyLWZvcm0nKTtcclxuXHJcbmV4cG9ydCBjb25zdCBlZGl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnRuJyk7XHJcbmV4cG9ydCBjb25zdCBhZGRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ0bicpO1xyXG5leHBvcnQgY29uc3QgZWRpdEF2YXRhckJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXItZWRpdC1idG4nKTtcclxuXHJcbmV4cG9ydCBjb25zdCBpbnB1dE5hbWUgPSBwb3B1cEVkaXRGb3JtLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV9uYW1lJyk7XHJcbmV4cG9ydCBjb25zdCBpbnB1dEpvYiA9IHBvcHVwRWRpdEZvcm0ucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF90eXBlX2pvYicpO1xyXG5cclxuZXhwb3J0IGNvbnN0IG5hbWVTZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19uYW1lJyk7XHJcbmV4cG9ydCBjb25zdCBhYm91dFNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2pvYicpO1xyXG5leHBvcnQgY29uc3QgYXZhdGFyU2VsZWN0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyJyk7XHJcblxyXG5leHBvcnQgY29uc3QgZWxlbWVudHNMaXN0ID0gJy5lbGVtZW50c19fbGlzdCc7XHJcblxyXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2VkaXQtZm9ybScsXHJcbiAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9faW5wdXQnLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19zYXZlLWJ0bicsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogJ3BvcHVwX19zYXZlLWJ0bl9pbmFjdGl2ZScsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiAncG9wdXBfX2lucHV0X3R5cGVfZXJyb3InLFxyXG4gIGVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXQtZXJyb3JfYWN0aXZlJyxcclxufTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoeyBjYXJkRGF0YSwgdGVtcGxhdGVTZWxlY3RvciwgdXNlcklkLCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZUxpa2VDYXJkQ2xpY2ssIGhhbmRsZVJlbW92ZUNhcmRDbGljayB9KSB7XHJcbiAgICB0aGlzLl9uYW1lID0gY2FyZERhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBjYXJkRGF0YS5saW5rO1xyXG4gICAgdGhpcy5fbGlrZXMgPSBjYXJkRGF0YS5saWtlcztcclxuICAgIHRoaXMuX2NhcmRJZCA9IGNhcmREYXRhLl9pZDtcclxuXHJcbiAgICB0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yID0gdGVtcGxhdGVTZWxlY3RvcjtcclxuXHJcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XHJcbiAgICB0aGlzLl9pc1VzZXJDYXJkID0gdXNlcklkID09PSBjYXJkRGF0YS5vd25lci5faWQ7XHJcblxyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZUNhcmRDbGljayA9IGhhbmRsZUxpa2VDYXJkQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVSZW1vdmVDYXJkQ2xpY2sgPSBoYW5kbGVSZW1vdmVDYXJkQ2xpY2s7XHJcbiAgfVxyXG5cclxuICAvLyDQvNC10YLQvtC0INC60L7Qv9C40YDQvtCy0LDQvdC40Y8g0YLQtdC80L/Qu9C10LnRgtCwXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpLmNvbnRlbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzX19pdGVtJykuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgLy8g0LzQtdGC0L7QtCDQs9C10L3QtdGA0LjRgNC+0LLQsNC90LjRjyDQutCw0YDRgtC+0YfQutC4XHJcbiAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcblxyXG4gICAgdGhpcy5fZWxlbWVudEltZyA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzX19pbWcnKTtcclxuXHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50c19fdGV4dCcpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2VsZW1lbnRJbWcuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2VsZW1lbnRJbWcuYWx0ID0gJ9Ca0LDRgNGC0LjQvdC60LAgJyArIHRoaXMuX25hbWU7XHJcblxyXG4gICAgdGhpcy5fYnV0dG9uRGVsZXRlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHNfX2RlbGV0ZScpO1xyXG5cclxuICAgIHRoaXMuX2J1dHRvbkxpa2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50c19fbGlrZScpO1xyXG4gICAgdGhpcy5fbGlrZXNDb3VudGVyID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHNfX2xpa2VzLWNvdW50ZXInKTtcclxuICAgIHRoaXMuX2xpa2VzQ291bnRlci50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fY291bnRMaWtlcygpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgLy8g0LzQtdGC0L7QtCDRgdC+INCy0YHQtdC80Lgg0YHQu9GD0YjQsNGC0LXQu9GP0LzQuCDQutCw0YDRgtC+0YfQutC4XHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgaWYgKCF0aGlzLl9pc1VzZXJDYXJkKSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkRlbGV0ZS5yZW1vdmUoKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRGVsZXRlID0gbnVsbDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkRlbGV0ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlUmVtb3ZlQ2FyZENsaWNrKGUpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIC8vIHRoaXMuX2J1dHRvbkRlbGV0ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX29uRGVsZXRlKTtcclxuICAgIHRoaXMuX2J1dHRvbkxpa2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VDYXJkQ2xpY2soKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fZWxlbWVudEltZy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyDRgdGH0LXRgtGH0LjQuiDQu9Cw0LnQutC+0LJcclxuICBfY291bnRMaWtlcygpIHtcclxuICAgIGlmICh0aGlzLl9jaGVja1VzZXJMaWtlcygpKSB7XHJcbiAgICAgIHRoaXMuYWRkTGlrZSgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5yZW1vdmVMaWtlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfY2hlY2tVc2VyTGlrZXMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fbGlrZXMuc29tZSgoaXRlbSkgPT4gaXRlbS5faWQgPT09IHRoaXMuX3VzZXJJZCk7XHJcbiAgfVxyXG5cclxuICAvLyDQvNC10YLQvtC0INC70LDQudC60LAg0LrQsNGA0YLQvtGH0LrQuFxyXG4gIGFkZExpa2UgPSAoKSA9PiB7XHJcbiAgICAvLyB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50c19fbGlrZScpLmNsYXNzTGlzdC50b2dnbGUoJ2VsZW1lbnRzX19saWtlX2FjdGl2ZScpO1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHNfX2xpa2UnKS5jbGFzc0xpc3QuYWRkKCdlbGVtZW50c19fbGlrZV9hY3RpdmUnKTtcclxuICAgIHRoaXMuaXNMaWtlZCA9IHRydWU7XHJcbiAgfTtcclxuXHJcbiAgLy8g0YPQsdC40YDQsNC10Lwg0LvQsNC50LpcclxuICByZW1vdmVMaWtlID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHNfX2xpa2UnKS5jbGFzc0xpc3QucmVtb3ZlKCdlbGVtZW50c19fbGlrZV9hY3RpdmUnKTtcclxuICAgIHRoaXMuaXNMaWtlZCA9IGZhbHNlO1xyXG4gIH07XHJcblxyXG4gIHVwZGF0ZWxpa2VzKGRhdGEpIHtcclxuICAgIHRoaXMuX2xpa2VzQ291bnRlci50ZXh0Q29udGVudCA9IGRhdGEubGVuZ3RoO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q2FyZElkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRJZDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IodmFsaWRhdGlvbkNvbmZpZywgZm9ybSkge1xyXG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gdmFsaWRhdGlvbkNvbmZpZy5mb3JtU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gdmFsaWRhdGlvbkNvbmZpZy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSB2YWxpZGF0aW9uQ29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHZhbGlkYXRpb25Db25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHZhbGlkYXRpb25Db25maWcuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHZhbGlkYXRpb25Db25maWcuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtO1xyXG4gICAgLy8g0LHQtdGA0LXQvCDRgdC/0LjRgdC+0Log0LjQvdC/0YPRgtC+0LIg0YEg0LrQvtC90LrRgNC10YLQvdC+0Lkg0YTQvtGA0LzRi1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpO1xyXG4gICAgLy8g0LHQtdGA0LXQvCDQutC90L7Qv9C60YMg0YEg0LrQvtC90LrRgNC10YLQvdC+0Lkg0YTQvtGA0LzRi1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIC8vINC80LXRgtC+0LQg0L/RgNC+0LLQtdGA0LrQuCDQstGB0LXRhSDQv9C+0LvQtdC5INC90LAg0LLQsNC70LjQtNC90L7RgdGC0YxcclxuICBfaGFzSW52YWxpZElucHV0ID0gKCkgPT4ge1xyXG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5faW5wdXRMaXN0KS5zb21lKChpbnB1dEVsZW1lbnQpID0+ICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpO1xyXG4gIH07XHJcblxyXG4gIC8vINC80LXRgtC+0LQg0L7RgtC+0LHRgNCw0LbQtdC90LjRjyDQvtGI0LjQsdC60LhcclxuICBfc2hvd0Vycm9yID0gZnVuY3Rpb24gKGVycm9yRWxlbWVudCwgaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfTtcclxuXHJcbiAgLy8g0LzQtdGC0L7QtCDRgdC60YDRi9GC0LjRjyDQvtGI0LjQsdC60LhcclxuICBfaGlkZUVycm9yID0gZnVuY3Rpb24gKGVycm9yRWxlbWVudCwgaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9O1xyXG5cclxuICAvLyDQvNC10YLQvtC0INCy0YvQt9C+0LLQsCDQvtGC0L7QsdGA0LDQttC10L3QuNGPL9GB0LrRgNGL0YLQuNGPINC+0YjQuNCx0LrQuFxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkgPSAoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuXHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5fc2hvd0Vycm9yKGVycm9yRWxlbWVudCwgaW5wdXRFbGVtZW50KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9oaWRlRXJyb3IoZXJyb3JFbGVtZW50LCBpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vINC80LXRgtC+0LQg0L/QtdGA0LXQutC70Y7Rh9C10L3QuNGPINGB0L7RgdGC0L7Rj9C90LjQtSDQutC90L7Qv9C60LhcclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0TGlzdCkpIHtcclxuICAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyDQvtGC0LrQu9GO0YfQtdC90L3QsNGPINC60L3QvtC/0LrQsFxyXG4gIF9kaXNhYmxlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gIH1cclxuXHJcbiAgLy8g0LzQtdGC0L7QtCDQv9GA0L7QstC10YDQutC4INCy0LLQvtC00LjQvNGL0YUg0LTQsNC90L3Ri9GFXHJcbiAgX3NldFZhbGlkTGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fc2V0VmFsaWRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIC8vINC80LXRgtC+0LQg0YPQtNCw0LvQtdC90LjRjyDQvtGI0LjQsdC+0Log0LIg0LjQvdC/0YPRgtCw0YUg0L/RgNC4INC/0L7QstGC0L7RgNC90L7QvCDQvtGC0LrRgNGL0YLQuNC4INC/0L7Qv9Cw0L/QvtCyXHJcbiAgcmVtb3ZlSW5wdXRFcnJvcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG5cclxuICAgICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgICB0aGlzLl9oaWRlRXJyb3IoZXJyb3JFbGVtZW50LCBpbnB1dEVsZW1lbnQpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIC8vINC+0YLQutC70Y7Rh9C10L3QuNC1INC60L3QvtC/0LrQuCDQstC+INC40LfQsdC10LbQsNC90LjQuCDQvtGC0L/RgNCw0LLQutC4INC/0YPRgdGC0L7QuSDQutCw0YDRgtC+0YfQutC4XHJcbiAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9idXR0b25DbG9zZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlLWJ0bicpO1xyXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UoZSkge1xyXG4gICAgaWYgKGUua2V5ID09PSAnRXNjYXBlJykge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlT3ZlcmxheUNsb3NlID0gKGUpID0+IHtcclxuICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX29wZW5lZCcpIHx8IGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2Nsb3NlLWJ1dHRvbicpKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2J1dHRvbkNsb3NlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLl9oYW5kbGVPdmVybGF5Q2xvc2UpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gJy4vcG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVTdWJtaXRGb3JtKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdEZvcm0gPSBoYW5kbGVTdWJtaXRGb3JtO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZWRpdC1mb3JtJyk7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dCcpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc2F2ZS1idG4nKTtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIHRoaXMuX2lucHV0VmFsdWVzID0ge307XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgdGhpcy5faW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0VmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlU3VibWl0Rm9ybSh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyTG9hZGluZ0J0bihpc0xvYWRpbmcpIHtcclxuICAgIGlzTG9hZGluZyA/ICh0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nKSA6ICh0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LjRgtGMJyk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0ICcuL2luZGV4LmNzcyc7XHJcbmltcG9ydCB7XHJcbiAgYXBpQ29uZmlnLFxyXG4gIG5hbWVTZWxlY3RvcixcclxuICBhYm91dFNlbGVjdG9yLFxyXG4gIGF2YXRhclNlbGVjdG9yLFxyXG4gIHBvcHVwRWRpdEZvcm0sXHJcbiAgYWRkRm9ybSxcclxuICBhdmF0YXJGb3JtLFxyXG4gIGVkaXRCdG4sXHJcbiAgYWRkQnRuLFxyXG4gIGVkaXRBdmF0YXJCdG4sXHJcbiAgZWxlbWVudHNMaXN0LFxyXG4gIHZhbGlkYXRpb25Db25maWcsXHJcbn0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcclxuaW1wb3J0IENhcmQgZnJvbSAnLi4vY29tcG9uZW50cy9jYXJkLmpzJztcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSAnLi4vY29tcG9uZW50cy9mb3JtVmFsaWRhdG9yLmpzJztcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi4vY29tcG9uZW50cy9zZWN0aW9uLmpzJztcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSAnLi4vY29tcG9uZW50cy9wb3B1cFdpdGhGb3JtLmpzJztcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvcG9wdXBXaXRoSW1hZ2UuanMnO1xyXG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvcG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzJztcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4uL2NvbXBvbmVudHMvdXNlckluZm8uanMnO1xyXG5pbXBvcnQgQXBpIGZyb20gJy4uL2NvbXBvbmVudHMvYXBpLmpzJztcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoYXBpQ29uZmlnKTtcclxuXHJcbi8vINGN0LrQt9C10LzQv9C70Y/RgCDQv9GA0L7RhNC40LvRj1xyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7IG5hbWU6IG5hbWVTZWxlY3RvciwgYWJvdXQ6IGFib3V0U2VsZWN0b3IsIGF2YXRhcjogYXZhdGFyU2VsZWN0b3IgfSk7XHJcblxyXG4vLyDRjdC60LfQtdC80L/Qu9GP0YAg0L/QvtC/0LDQv9CwLCDQutC+0YLQvtGA0YvQuSDRg9GC0L7Rh9C90Y/QtdGCLCDRg9C00LDQu9GP0YLRjCDQu9C4INC60LDRgNGC0L7Rh9C60YNcclxuY29uc3QgcG9wdXBXaXRoQ29uZmlybWF0aW9uID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbih7IHBvcHVwU2VsZWN0b3I6ICcuY29uZmlybS1wb3B1cCcgfSk7XHJcbnBvcHVwV2l0aENvbmZpcm1hdGlvbi5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8g0Y3QutC30LXQvNC/0LvRj9GAINC/0L7Qv9Cw0L/QsCDQutCw0YDRgtC40L3QutC4XHJcbmNvbnN0IHBvcHVwSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoeyBwb3B1cFNlbGVjdG9yOiAnLnBvcHVwX3R5cGVfb3Blbi1pbWcnIH0pO1xyXG5wb3B1cEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyDQstCw0LvQuNC00LDRhtC40Y8g0LjQvdC/0YPRgtC+0LIg0L/RgNC4INGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Lgg0L/RgNC+0YTQuNC70Y9cclxuY29uc3QgcHJvZmlsZVZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBwb3B1cEVkaXRGb3JtKTtcclxucHJvZmlsZVZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4vLyDQstCw0LvQuNC00LDRhtC40Y8g0LjQvdC/0YPRgtCwINC40LfQvNC10L3QtdC90LjRjyDQsNCy0LDRgtCw0YDQutC4INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG5jb25zdCBhdmF0YXJWYWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgYXZhdGFyRm9ybSk7XHJcbmF2YXRhclZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4vLyDQstCw0LvQuNC00LDRhtC40Y8g0LjQvdC/0YPRgtC+0LIg0L/RgNC4INC00L7QsdCw0LLQu9C10L3QuNC4INC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuFxyXG5jb25zdCBhZGRDYXJkVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIGFkZEZvcm0pO1xyXG5hZGRDYXJkVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vLyDQn9C+0LvRg9GH0LXQvdC40LUg0LTQsNC90L3Ri9GFINC/0YDQvtGE0LjQu9GPINGBINGB0LXRgNCy0LXRgNCwXHJcbmFwaVxyXG4gIC5nZXRVc2VySW5mbygpXHJcbiAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgY29uc3QgdXNlckRhdGEgPSByZXM7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7IG5hbWU6IHVzZXJEYXRhLm5hbWUsIGFib3V0OiB1c2VyRGF0YS5hYm91dCwgYXZhdGFyOiB1c2VyRGF0YS5hdmF0YXIsIHVzZXJJZDogdXNlckRhdGEuX2lkIH0pO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsCDQv9GA0Lgg0LfQsNCz0YDRg9C30LrQtSDQuNGB0YXQvtC00L3Ri9GFINC00LDQvdC90YvRhTogJHtlcnJvcn1gKTtcclxuICB9KTtcclxuXHJcbi8vINCf0L7Qu9GD0YfQtdC90LjQtSDQutCw0YDRgtC+0YfQtdC6INGBINGB0LXRgNCy0LXRgNCwXHJcbmFwaVxyXG4gIC5nZXRDYXJkcygpXHJcbiAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgY29uc3QgaXRlbXMgPSByZXM7XHJcbiAgICByZW5kZXJDYXJkcy5yZW5kZXJJdGVtcyhpdGVtcyk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwINC/0YDQuCDQt9Cw0LPRgNGD0LfQutC1INC40YHRhdC+0LTQvdGL0YUg0LTQsNC90L3Ri9GFOiAke2Vycm9yfWApO1xyXG4gIH0pO1xyXG5cclxuLy8g0J7RgtGA0LjRgdC+0LLQutCwINC60LDRgNGC0L7Rh9C10Log0YEg0YHQtdGA0LLQtdGA0LBcclxuY29uc3QgcmVuZGVyQ2FyZHMgPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICByZW5kZXJlcjogKGNhcmREYXRhKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZCh7XHJcbiAgICAgICAgY2FyZERhdGEsXHJcbiAgICAgICAgdGVtcGxhdGVTZWxlY3RvcjogJyNlbGVtZW50cy10ZW1wbGF0ZScsXHJcbiAgICAgICAgdXNlcklkOiB1c2VySW5mby5nZXRVc2VySWQoKSxcclxuICAgICAgICBoYW5kbGVDYXJkQ2xpY2s6IChuYW1lLCBsaW5rKSA9PiB7XHJcbiAgICAgICAgICBwb3B1cEltYWdlLm9wZW4obmFtZSwgbGluayk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBoYW5kbGVMaWtlQ2FyZENsaWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICBpZiAoY2FyZC5pc0xpa2VkKSB7XHJcbiAgICAgICAgICAgIGFwaVxyXG4gICAgICAgICAgICAgIC5kZWxldGVDYXJkTGlrZShjYXJkLmdldENhcmRJZCgpKVxyXG4gICAgICAgICAgICAgIC50aGVuKChjYXJkRGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY2FyZC5yZW1vdmVMaWtlKCk7XHJcbiAgICAgICAgICAgICAgICBjYXJkLnVwZGF0ZWxpa2VzKGNhcmREYXRhLmxpa2VzKTtcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhcGlcclxuICAgICAgICAgICAgICAubGlrZUNhcmQoY2FyZC5nZXRDYXJkSWQoKSlcclxuICAgICAgICAgICAgICAudGhlbigoY2FyZERhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIGNhcmQuYWRkTGlrZSgpO1xyXG4gICAgICAgICAgICAgICAgY2FyZC51cGRhdGVsaWtlcyhjYXJkRGF0YS5saWtlcyk7XHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaGFuZGxlUmVtb3ZlQ2FyZENsaWNrOiAoZSkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBlLnRhcmdldC5jbG9zZXN0KCcuZWxlbWVudHNfX2l0ZW0nKTtcclxuICAgICAgICAgIHBvcHVwV2l0aENvbmZpcm1hdGlvbi5vcGVuKCk7XHJcbiAgICAgICAgICBwb3B1cFdpdGhDb25maXJtYXRpb24uc2V0U3VibWl0SGFuZGxlcigoKSA9PiB7XHJcbiAgICAgICAgICAgIGFwaVxyXG4gICAgICAgICAgICAgIC5yZW1vdmVDYXJkKGNhcmQuZ2V0Q2FyZElkKCkpXHJcbiAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICBwb3B1cFdpdGhDb25maXJtYXRpb24uY2xvc2UoKTtcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIGNhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgZWxlbWVudHNMaXN0XHJcbik7XHJcblxyXG4vLyDQuNC30LzQtdC90LXQvdC40LUg0LDQstCw0YLQsNGA0LAg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbmNvbnN0IHVwZGF0ZVVzZXJBdmF0YXJQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHsgcG9wdXBTZWxlY3RvcjogJy5hdmF0YXItcG9wdXAnIH0sIChmb3JtVmFsdWVzKSA9PiB7XHJcbiAgdXBkYXRlVXNlckF2YXRhclBvcHVwLnJlbmRlckxvYWRpbmdCdG4odHJ1ZSk7XHJcbiAgYXBpXHJcbiAgICAudXBkYXRlVXNlckF2YXRhcih7IGF2YXRhcjogZm9ybVZhbHVlcy51cmwgfSlcclxuICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJBdmF0YXIoeyBuZXdVc2VyQXZhdGFyOiBkYXRhLmF2YXRhciB9KTtcclxuICAgICAgdXBkYXRlVXNlckF2YXRhclBvcHVwLmNsb3NlKCk7XHJcbiAgICAgIGF2YXRhckZvcm0ucmVzZXQoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgdXBkYXRlVXNlckF2YXRhclBvcHVwLnJlbmRlckxvYWRpbmdCdG4oZmFsc2UpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxudXBkYXRlVXNlckF2YXRhclBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5lZGl0QXZhdGFyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIGF2YXRhclZhbGlkYXRpb24ucmVtb3ZlSW5wdXRFcnJvcnMoKTtcclxuICB1cGRhdGVVc2VyQXZhdGFyUG9wdXAub3BlbigpO1xyXG59KTtcclxuXHJcbi8vINCY0LfQvNC10L3QtdC90LjQtSDQtNCw0L3QvdGL0YUg0L/RgNC+0YTQuNC70Y9cclxuY29uc3QgcHJvZmlsZUVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHsgcG9wdXBTZWxlY3RvcjogJy5wcm9maWxlLXBvcHVwJyB9LCAoZm9ybVZhbHVlcykgPT4ge1xyXG4gIHByb2ZpbGVFZGl0UG9wdXAucmVuZGVyTG9hZGluZ0J0bih0cnVlKTtcclxuICBhcGlcclxuICAgIC51cGRhdGVVc2VySW5mbyhmb3JtVmFsdWVzKVxyXG4gICAgLnRoZW4oKGZvcm1WYWx1ZXMpID0+IHtcclxuICAgICAgdXNlckluZm8ubmV3VXNlckluZm8oZm9ybVZhbHVlcyk7XHJcbiAgICAgIHByb2ZpbGVFZGl0UG9wdXAuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LA6ICR7ZXJyb3J9IC0g0L3QtSDRg9C00LDQu9C+0YHRjCDQvtCx0L3QvtCy0LjRgtGMINC/0YDQvtGE0LjQu9GMYCk7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBwcm9maWxlRWRpdFBvcHVwLnJlbmRlckxvYWRpbmdCdG4oZmFsc2UpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5wcm9maWxlRWRpdFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyDRgdC70YPRiNCw0YLQtdC70Ywg0L3QsCDQvtGC0LrRgNGL0YLQuNC1INC/0L7Qv9Cw0L/QsCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQvtGE0LjQu9GPINC4INC/0L7QtNCz0YDRg9C30LrQsCDRgtC10LrRg9GJ0LjRhSDQtNCw0L3QvdGL0YUg0L/RgNC+0YTQuNC70Y8g0LIg0LjQvdC/0YPRgtGLXHJcbmVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgcHJvZmlsZVZhbGlkYXRpb24ucmVtb3ZlSW5wdXRFcnJvcnMoKTtcclxuICBjb25zdCB1c2VyRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgcHJvZmlsZUVkaXRQb3B1cC5zZXRJbnB1dFZhbHVlcyh1c2VyRGF0YSk7XHJcbiAgcHJvZmlsZUVkaXRQb3B1cC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuLy8g0JTQvtCx0LDQstC70LXQvdC40LUg0L3QvtCy0L7QuSDQutCw0YDRgtC+0YfQutC4XHJcbmNvbnN0IGFkZENhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHsgcG9wdXBTZWxlY3RvcjogJy5hZGQtcG9wdXAnIH0sIChpbnB1dFZhbHVlcykgPT4ge1xyXG4gIGFkZENhcmRQb3B1cC5yZW5kZXJMb2FkaW5nQnRuKHRydWUpO1xyXG4gIGFwaVxyXG4gICAgLmFkZE5ld0NhcmQoaW5wdXRWYWx1ZXMpXHJcbiAgICAudGhlbigoaW5wdXRWYWx1ZXMpID0+IHtcclxuICAgICAgcmVuZGVyQ2FyZHMuYWRkSXRlbShpbnB1dFZhbHVlcyk7XHJcbiAgICAgIGFkZENhcmRQb3B1cC5jbG9zZSgpO1xyXG4gICAgICBhZGRGb3JtLnJlc2V0KCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwOiAke2Vycm9yfSAtINC90LUg0YPQtNCw0LvQvtGB0Ywg0LTQvtCx0LDQstC40YLRjCDQvdC+0LLRg9GOINC60LDRgNGC0L7Rh9C60YNgKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIGFkZENhcmRQb3B1cC5yZW5kZXJMb2FkaW5nQnRuKGZhbHNlKTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbmFkZENhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8g0YHQu9GD0YjQsNGC0LXQu9GMINC90LAg0L7RgtC60YDRi9GC0LjQtSDQv9C+0L/QsNC/0LAg0LTQvtCx0LDQstC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxyXG5hZGRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgYWRkQ2FyZFZhbGlkYXRpb24ucmVtb3ZlSW5wdXRFcnJvcnMoKTtcclxuICBhZGRDYXJkUG9wdXAub3BlbigpO1xyXG59KTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xyXG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcclxuICB9XHJcblxyXG4gIF9jaGVja1Jlc3BvbnNlKHJlcykge1xyXG4gICAgaWYgKHJlcy5vaykge1xyXG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9IC0g0L3QtSDRg9C00LDQu9C+0YHRjCDRg9GB0YLQsNC90L7QstC40YLRjCDQv9C+0LTQutC70Y7Rh9C10L3QuNC1INC6IGFwaWApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH11c2Vycy9tZWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVVc2VySW5mbyhkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH11c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWU6IGRhdGEubmFtZSwgYWJvdXQ6IGRhdGEuYWJvdXQgfSksXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlVXNlckF2YXRhcihkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH11c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH1jYXJkc2AsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBhZGROZXdDYXJkKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH1jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZSwgbGluayB9KSxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICByZW1vdmVDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9Y2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGxpa2VDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9Y2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmRMaWtlKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9Y2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHVzZXJJbmZvKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gdXNlckluZm8ubmFtZTtcclxuICAgIHRoaXMuX2Fib3V0ID0gdXNlckluZm8uYWJvdXQ7XHJcbiAgICB0aGlzLl9hdmF0YXIgPSB1c2VySW5mby5hdmF0YXI7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIGFib3V0OiB0aGlzLl9hYm91dC50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh1c2VyRGF0YSkge1xyXG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IHVzZXJEYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9hYm91dC50ZXh0Q29udGVudCA9IHVzZXJEYXRhLmFib3V0O1xyXG4gICAgdGhpcy5fYXZhdGFyLnNyYyA9IHVzZXJEYXRhLmF2YXRhcjtcclxuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJEYXRhLnVzZXJJZDtcclxuICB9XHJcblxyXG4gIG5ld1VzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xyXG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9hYm91dC50ZXh0Q29udGVudCA9IGFib3V0O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckF2YXRhcih7IG5ld1VzZXJBdmF0YXIgfSkge1xyXG4gICAgdGhpcy5fYXZhdGFyLnNyYyA9IG5ld1VzZXJBdmF0YXI7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fdXNlcklkO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gJy4vcG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY29uZmlybScpO1xyXG4gIH1cclxuXHJcbiAgc2V0U3VibWl0SGFuZGxlcihuZXdGb3JtU3VibWl0KSB7XHJcbiAgICB0aGlzLl9mb3JtU3VibWl0ID0gbmV3Rm9ybVN1Ym1pdDtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2Zvcm1TdWJtaXQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gJy4vcG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9uYW1lID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1nLXRpdGxlJyk7XHJcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltZycpO1xyXG4gIH1cclxuXHJcbiAgb3BlbihuYW1lLCBsaW5rKSB7XHJcbiAgICBzdXBlci5vcGVuKG5hbWUsIGxpbmspO1xyXG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSBsaW5rO1xyXG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gJ9Ca0LDRgNGC0LjQvdC60LAgJyArIG5hbWU7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XHJcbiAgICBpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuYWRkSXRlbShpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShpdGVtKSB7XHJcbiAgICBjb25zdCBjYXJkID0gdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChjYXJkKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbImFkZFBvcHVwIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicG9wdXBFZGl0Rm9ybSIsImFkZEZvcm0iLCJhdmF0YXJGb3JtIiwiZWRpdEJ0biIsImFkZEJ0biIsImVkaXRBdmF0YXJCdG4iLCJuYW1lU2VsZWN0b3IiLCJhYm91dFNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJ2YWxpZGF0aW9uQ29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJDYXJkIiwiY29uc3RydWN0b3IiLCJfcmVmIiwiY2FyZERhdGEiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwidXNlcklkIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlTGlrZUNhcmRDbGljayIsImhhbmRsZVJlbW92ZUNhcmRDbGljayIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfbGlrZXMiLCJsaWtlcyIsIl9jYXJkSWQiLCJfaWQiLCJfdGVtcGxhdGVTZWxlY3RvciIsIl91c2VySWQiLCJfaXNVc2VyQ2FyZCIsIm93bmVyIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVMaWtlQ2FyZENsaWNrIiwiX2hhbmRsZVJlbW92ZUNhcmRDbGljayIsIl9nZXRUZW1wbGF0ZSIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJnZW5lcmF0ZUNhcmQiLCJfZWxlbWVudCIsIl9lbGVtZW50SW1nIiwidGV4dENvbnRlbnQiLCJzcmMiLCJhbHQiLCJfYnV0dG9uRGVsZXRlIiwiX2J1dHRvbkxpa2UiLCJfbGlrZXNDb3VudGVyIiwibGVuZ3RoIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2NvdW50TGlrZXMiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInJlbW92ZSIsIl9jaGVja1VzZXJMaWtlcyIsImFkZExpa2UiLCJyZW1vdmVMaWtlIiwic29tZSIsIml0ZW0iLCJjbGFzc0xpc3QiLCJhZGQiLCJpc0xpa2VkIiwidXBkYXRlbGlrZXMiLCJkYXRhIiwiZ2V0Q2FyZElkIiwiRm9ybVZhbGlkYXRvciIsImZvcm0iLCJfZm9ybVNlbGVjdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIl9mb3JtIiwiX2lucHV0TGlzdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfc3VibWl0QnV0dG9uIiwiX2hhc0ludmFsaWRJbnB1dCIsIkFycmF5IiwiZnJvbSIsImlucHV0RWxlbWVudCIsInZhbGlkaXR5IiwidmFsaWQiLCJfc2hvd0Vycm9yIiwiZXJyb3JFbGVtZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsImlkIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2Rpc2FibGVCdXR0b24iLCJyZW1vdmVBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJfc2V0VmFsaWRMaXN0ZW5lcnMiLCJmb3JFYWNoIiwiZW5hYmxlVmFsaWRhdGlvbiIsInJlbW92ZUlucHV0RXJyb3JzIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9idXR0b25DbG9zZSIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5IiwiX2hhbmRsZU92ZXJsYXlDbG9zZSIsInRhcmdldCIsImNvbnRhaW5zIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlU3VibWl0Rm9ybSIsInN1cGVyIiwiX2hhbmRsZVN1Ym1pdEZvcm0iLCJfcG9wdXBGb3JtIiwiX2dldElucHV0VmFsdWVzIiwiX2lucHV0VmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInNldElucHV0VmFsdWVzIiwicHJldmVudERlZmF1bHQiLCJyZW5kZXJMb2FkaW5nQnRuIiwiaXNMb2FkaW5nIiwicmVzZXQiLCJhcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJfY2hlY2tSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJnZXRVc2VySW5mbyIsImZldGNoIiwidGhlbiIsInVwZGF0ZVVzZXJJbmZvIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhYm91dCIsInVwZGF0ZVVzZXJBdmF0YXIiLCJnZXRDYXJkcyIsImFkZE5ld0NhcmQiLCJfcmVmMiIsInJlbW92ZUNhcmQiLCJjYXJkSWQiLCJsaWtlQ2FyZCIsImRlbGV0ZUNhcmRMaWtlIiwiYXV0aG9yaXphdGlvbiIsInVzZXJJbmZvIiwiX2Fib3V0IiwiX2F2YXRhciIsImF2YXRhciIsInNldFVzZXJJbmZvIiwidXNlckRhdGEiLCJuZXdVc2VySW5mbyIsInNldFVzZXJBdmF0YXIiLCJuZXdVc2VyQXZhdGFyIiwiZ2V0VXNlcklkIiwicG9wdXBXaXRoQ29uZmlybWF0aW9uIiwic2V0U3VibWl0SGFuZGxlciIsIm5ld0Zvcm1TdWJtaXQiLCJfZm9ybVN1Ym1pdCIsInBvcHVwSW1hZ2UiLCJfaW1hZ2UiLCJwcm9maWxlVmFsaWRhdGlvbiIsImF2YXRhclZhbGlkYXRpb24iLCJhZGRDYXJkVmFsaWRhdGlvbiIsImNhdGNoIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwiaXRlbXMiLCJyZW5kZXJDYXJkcyIsInJlbmRlckl0ZW1zIiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJhZGRJdGVtIiwiY2FyZCIsInByZXBlbmQiLCJlcnIiLCJjYXJkRWxlbWVudCIsImNsb3Nlc3QiLCJ1cGRhdGVVc2VyQXZhdGFyUG9wdXAiLCJmb3JtVmFsdWVzIiwidXJsIiwiZmluYWxseSIsInByb2ZpbGVFZGl0UG9wdXAiLCJhZGRDYXJkUG9wdXAiLCJpbnB1dFZhbHVlcyJdLCJzb3VyY2VSb290IjoiIn0=