(()=>{"use strict";const e=document.querySelector(".add-popup"),t=document.querySelector(".popup__edit-form"),s=e.querySelector(".add-form"),r=document.querySelector(".avatar-form"),n=document.querySelector(".profile__edit-btn"),i=document.querySelector(".profile__add-btn"),o=document.querySelector(".profile__avatar-edit-btn"),a=(t.querySelector(".popup__input_type_name"),t.querySelector(".popup__input_type_job"),document.querySelector(".profile__name")),l=document.querySelector(".profile__job"),h=document.querySelector(".profile__avatar"),u=document.querySelector(".popup__save-btn"),_=document.querySelector(".create-btn"),c={formSelector:".popup__edit-form",inputSelector:".popup__input",submitButtonSelector:".popup__save-btn",inactiveButtonClass:"popup__save-btn_inactive",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_active"};class d{constructor(e){let{cardData:t,templateSelector:s,userId:r,handleCardClick:n,handleLikeCardClick:i,handleRemoveCardClick:o}=e;this._name=t.name,this._link=t.link,this._likes=t.likes,this._cardId=t._id,this._templateSelector=s,this._userId=r,this._isUserCard=r===t.owner._id,this._handleCardClick=n,this._handleLikeCardClick=i,this._handleRemoveCardClick=o}_getTemplate(){return document.querySelector(this._templateSelector).content.querySelector(".elements__item").cloneNode(!0)}generateCard(){return this._element=this._getTemplate(),this._elementImg=this._element.querySelector(".elements__img"),this._element.querySelector(".elements__text").textContent=this._name,this._elementImg.src=this._link,this._elementImg.alt="Картинка "+this._name,this._buttonDelete=this._element.querySelector(".elements__delete"),this._buttonLike=this._element.querySelector(".elements__like"),this._likesCounter=this._element.querySelector(".elements__likes-counter"),this._likesCounter.textContent=this._likes.length,this._setEventListeners(),this._countLikes(),this._element}_setEventListeners(){this._isUserCard?this._buttonDelete.addEventListener("click",(e=>{this._handleRemoveCardClick(e)})):(this._buttonDelete.remove(),this._buttonDelete=null),this._buttonLike.addEventListener("click",(()=>{this._handleLikeCardClick()})),this._elementImg.addEventListener("click",(()=>{this._handleCardClick(this._name,this._link)}))}_countLikes(){this._checkUserLikes()?this.addLike():this.removeLike()}_checkUserLikes(){return this._likes.some((e=>e._id===this._userId))}addLike=()=>{this._element.querySelector(".elements__like").classList.add("elements__like_active"),this.isLiked=!0};removeLike=()=>{this._element.querySelector(".elements__like").classList.remove("elements__like_active"),this.isLiked=!1};updatelikes(e){this._likesCounter.textContent=e.length}getCardId(){return this._cardId}}class p{constructor(e,t){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t,this._inputList=t.querySelectorAll(this._inputSelector),this._submitButton=t.querySelector(this._submitButtonSelector)}_hasInvalidInput=()=>Array.from(this._inputList).some((e=>!e.validity.valid));_showError=function(e,t){t.classList.add(this._inputErrorClass),e.textContent=t.validationMessage,e.classList.add(this._errorClass)};_hideError=function(e,t){t.classList.remove(this._inputErrorClass),e.textContent="",e.classList.remove(this._errorClass)};_checkInputValidity=e=>{const t=this._form.querySelector(`#${e.id}-error`);return e.validity.valid?this._hideError(t,e):this._showError(t,e)};_toggleButtonState(){this._hasInvalidInput(this._inputList)?this._disableButton():(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.removeAttribute("disabled"))}_disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.setAttribute("disabled",!0)}_setValidListeners(){this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._setValidListeners()}removeInputErrors(){this._inputList.forEach((e=>{const t=this._form.querySelector(`#${e.id}-error`);e.validity.valid||this._hideError(t,e)})),this._disableButton()}}class m{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._buttonClose=this._popupElement.querySelector(".popup__close-btn"),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}_handleOverlayClose=e=>{(e.target.classList.contains("popup_opened")||e.target.classList.contains("popup__close-button"))&&this.close()};setEventListeners(){this._buttonClose.addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("mousedown",this._handleOverlayClose)}}class v extends m{constructor(e,t){super(e),this._handleSubmitForm=t,this._popupForm=this._popupElement.querySelector(".popup__edit-form"),this._inputList=this._popupElement.querySelectorAll(".popup__input"),this._submitButton=this._popupElement.querySelector(".popup__save-btn")}_getInputValues(){return this._inputValues={},this._inputList.forEach((e=>{this._inputValues[e.name]=e.value})),this._inputValues}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmitForm(this._getInputValues())}))}renderLoadingBtn(e,t){this._submitButton.textContent=e?"Сохранение...":t}close(){super.close(),this._popupForm.reset()}}const k=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_checkResponse(e){return e.ok?e.json():Promise.reject(`Ошибка: ${e.status} - не удалось установить подключение к api`)}getUserInfo(){return fetch(`${this._baseUrl}users/me`,{headers:this._headers}).then(this._checkResponse)}updateUserInfo(e){return fetch(`${this._baseUrl}users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then(this._checkResponse)}updateUserAvatar(e){return fetch(`${this._baseUrl}users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._checkResponse)}getCards(){return fetch(`${this._baseUrl}cards`,{headers:this._headers}).then(this._checkResponse)}addNewCard(e){let{name:t,link:s}=e;return fetch(`${this._baseUrl}cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then(this._checkResponse)}removeCard(e){return fetch(`${this._baseUrl}cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}likeCard(e){return fetch(`${this._baseUrl}cards/likes/${e}`,{method:"PUT",headers:this._headers}).then(this._checkResponse)}deleteCardLike(e){return fetch(`${this._baseUrl}cards/likes/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}getAllData(){return Promise.all([this.getUserInfo(),this.getCards()])}}({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-66/",headers:{authorization:"aa38c948-6d23-4336-8d1a-1b31ad529250","Content-Type":"application/json"}}),C=new class{constructor(e){this._name=e.name,this._about=e.about,this._avatar=e.avatar}getUserInfo(){return{name:this._name.textContent,about:this._about.textContent}}setUserInfo(e){this._name.textContent=e.name,this._about.textContent=e.about,this._avatar.src=e.avatar,this._userId=e.userId}newUserInfo(e){let{name:t,about:s}=e;this._name.textContent=t,this._about.textContent=s}setUserAvatar(e){let{newUserAvatar:t}=e;this._avatar.src=t}getUserId(){return this._userId}}({name:a,about:l,avatar:h}),b=new class extends m{constructor(e){super(e),this._popupForm=this._popupElement.querySelector(".popup__confirm")}setSubmitHandler(e){this._formSubmit=e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._formSubmit()}))}}({popupSelector:".confirm-popup"});b.setEventListeners();const L=new class extends m{constructor(e){super(e),this._name=this._popupElement.querySelector(".popup__img-title"),this._image=this._popupElement.querySelector(".popup__img")}open(e,t){super.open(e,t),this._name.textContent=e,this._image.src=t,this._image.alt="Картинка "+e}}({popupSelector:".popup_type_open-img"});L.setEventListeners();const S=new p(c,t);S.enableValidation();const E=new p(c,r);E.enableValidation();const y=new p(c,s);y.enableValidation(),k.getAllData().then((e=>{let[t,s]=e;C.setUserInfo({name:t.name,about:t.about,avatar:t.avatar,userId:t._id}),f.renderItems(s)})).catch((e=>{console.log(`Ошибка при загрузке исходных данных: ${e}`)}));const f=new class{constructor(e,t){let{renderer:s}=e;this._renderer=s,this._container=document.querySelector(t)}renderItems(e){e.forEach((e=>{this.addItem(e)}))}addItem(e){const t=this._renderer(e);this._container.prepend(t)}}({renderer:e=>{const t=new d({cardData:e,templateSelector:"#elements-template",userId:C.getUserId(),handleCardClick:(e,t)=>{L.open(e,t)},handleLikeCardClick:()=>{t.isLiked?k.deleteCardLike(t.getCardId()).then((e=>{t.removeLike(),t.updatelikes(e.likes)})).catch((e=>{console.error(e)})):k.likeCard(t.getCardId()).then((e=>{t.addLike(),t.updatelikes(e.likes)})).catch((e=>{console.error(e)}))},handleRemoveCardClick:e=>{const s=e.target.closest(".elements__item");b.open(),b.setSubmitHandler((()=>{k.removeCard(t.getCardId()).then((()=>{s.remove(),b.close()})).catch((e=>{console.error(e)}))}))}});return t.generateCard()}},".elements__list"),g=new v({popupSelector:".avatar-popup"},(e=>{g.renderLoadingBtn(!0),k.updateUserAvatar(e).then((e=>{C.setUserAvatar({newUserAvatar:e.avatar}),g.close(),r.reset()})).catch((e=>{console.error(e)})).finally((()=>{g.renderLoadingBtn(!1)}))}));g.setEventListeners(),o.addEventListener("click",(()=>{E.removeInputErrors(),g.open()}));const I=new v({popupSelector:".profile-popup"},(e=>{I.renderLoadingBtn(!0),k.updateUserInfo(e).then((e=>{C.newUserInfo(e),I.close()})).catch((e=>{console.log(`Ошибка: ${e} - не удалось обновить профиль`)})).finally((()=>{I.renderLoadingBtn(!1,u.value)}))}));I.setEventListeners(),n.addEventListener("click",(()=>{S.removeInputErrors();const e=C.getUserInfo();I.setInputValues(e),I.open()}));const q=new v({popupSelector:".add-popup"},(e=>{q.renderLoadingBtn(!0),k.addNewCard(e).then((e=>{f.addItem(e),q.close(),s.reset()})).catch((e=>{console.log(`Ошибка: ${e} - не удалось добавить новую карточку`)})).finally((()=>{q.renderLoadingBtn(!1,_.value)}))}));q.setEventListeners(),i.addEventListener("click",(()=>{y.removeInputErrors(),q.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFRLEtBQ1BDLEVBQWlCM0Usa0JBQWlCLEVBQU94SCxFQUFtQnFILE1BQU0sR0FDbEUsSUFFTjhFLEVBQWlCdkYsb0JBR2pCbEgsRUFBUXVELGlCQUFpQixTQUFTLEtBQ2hDMkgsRUFBa0I5RSxvQkFDbEIsTUFBTW1FLEVBQVdMLEVBQVNwQixjQUMxQjJELEVBQWlCN0UsZUFBZTJDLEdBQ2hDa0MsRUFBaUI5RixNQUFNLElBSXpCLE1BQU1nRyxFQUFlLElBQUl4RixFQUFjLENBQUViLGNBQWUsZUFBaUJzRyxJQUN2RUQsRUFBYTdFLGtCQUFpQixHQUM5QkksRUFDR3VCLFdBQVdtRCxHQUNYNUQsTUFBTTRELElBQ0x0QixFQUFZVSxRQUFRWSxHQUNwQkQsRUFBYS9GLFFBQ2I5RyxFQUFRbUksT0FBTyxJQUVoQnVELE9BQU9DLElBQ05DLFFBQVFDLElBQUssV0FBVUYseUNBQTZDLElBRXJFZSxTQUFRLEtBQ1BHLEVBQWE3RSxrQkFBaUIsRUFBT3ZILEVBQWNvSCxNQUFNLEdBQ3pELElBR05nRixFQUFhekYsb0JBR2JqSCxFQUFPc0QsaUJBQWlCLFNBQVMsS0FDL0I2SCxFQUFrQmhGLG9CQUNsQnVHLEVBQWFoRyxNQUFNLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBhcGlDb25maWcgPSB7XHJcbiAgYmFzZVVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNjYvJyxcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiAnYWEzOGM5NDgtNmQyMy00MzM2LThkMWEtMWIzMWFkNTI5MjUwJyxcclxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgfSxcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBhZGRQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtcG9wdXAnKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwRWRpdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2VkaXQtZm9ybScpO1xyXG5leHBvcnQgY29uc3QgYWRkRm9ybSA9IGFkZFBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5hZGQtZm9ybScpO1xyXG5leHBvcnQgY29uc3QgYXZhdGFyRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hdmF0YXItZm9ybScpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1idG4nKTtcclxuZXhwb3J0IGNvbnN0IGFkZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnRuJyk7XHJcbmV4cG9ydCBjb25zdCBlZGl0QXZhdGFyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2F2YXRhci1lZGl0LWJ0bicpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGlucHV0TmFtZSA9IHBvcHVwRWRpdEZvcm0ucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF90eXBlX25hbWUnKTtcclxuZXhwb3J0IGNvbnN0IGlucHV0Sm9iID0gcG9wdXBFZGl0Rm9ybS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfam9iJyk7XHJcblxyXG5leHBvcnQgY29uc3QgbmFtZVNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX25hbWUnKTtcclxuZXhwb3J0IGNvbnN0IGFib3V0U2VsZWN0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fam9iJyk7XHJcbmV4cG9ydCBjb25zdCBhdmF0YXJTZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXInKTtcclxuXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRm9ybUVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3NhdmUtYnRuJyk7XHJcbmV4cG9ydCBjb25zdCBjcmVhdGVDYXJkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNyZWF0ZS1idG4nKTtcclxuXHJcbmV4cG9ydCBjb25zdCBlbGVtZW50c0xpc3QgPSAnLmVsZW1lbnRzX19saXN0JztcclxuXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogJy5wb3B1cF9fZWRpdC1mb3JtJyxcclxuICBpbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19pbnB1dCcsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcucG9wdXBfX3NhdmUtYnRuJyxcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAncG9wdXBfX3NhdmUtYnRuX2luYWN0aXZlJyxcclxuICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXRfdHlwZV9lcnJvcicsXHJcbiAgZXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dC1lcnJvcl9hY3RpdmUnLFxyXG59O1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3Rvcih7IGNhcmREYXRhLCB0ZW1wbGF0ZVNlbGVjdG9yLCB1c2VySWQsIGhhbmRsZUNhcmRDbGljaywgaGFuZGxlTGlrZUNhcmRDbGljaywgaGFuZGxlUmVtb3ZlQ2FyZENsaWNrIH0pIHtcclxuICAgIHRoaXMuX25hbWUgPSBjYXJkRGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGNhcmREYXRhLmxpbms7XHJcbiAgICB0aGlzLl9saWtlcyA9IGNhcmREYXRhLmxpa2VzO1xyXG4gICAgdGhpcy5fY2FyZElkID0gY2FyZERhdGEuX2lkO1xyXG5cclxuICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xyXG5cclxuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcclxuICAgIHRoaXMuX2lzVXNlckNhcmQgPSB1c2VySWQgPT09IGNhcmREYXRhLm93bmVyLl9pZDtcclxuXHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2FyZENsaWNrID0gaGFuZGxlTGlrZUNhcmRDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZVJlbW92ZUNhcmRDbGljayA9IGhhbmRsZVJlbW92ZUNhcmRDbGljaztcclxuICB9XHJcblxyXG4gIC8vINC80LXRgtC+0LQg0LrQvtC/0LjRgNC+0LLQsNC90LjRjyDRgtC10LzQv9C70LXQudGC0LBcclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGVTZWxlY3RvcikuY29udGVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHNfX2l0ZW0nKS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICAvLyDQvNC10YLQvtC0INCz0LXQvdC10YDQuNGA0L7QstCw0L3QuNGPINC60LDRgNGC0L7Rh9C60LhcclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuXHJcbiAgICB0aGlzLl9lbGVtZW50SW1nID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHNfX2ltZycpO1xyXG5cclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzX190ZXh0JykudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fZWxlbWVudEltZy5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fZWxlbWVudEltZy5hbHQgPSAn0JrQsNGA0YLQuNC90LrQsCAnICsgdGhpcy5fbmFtZTtcclxuXHJcbiAgICB0aGlzLl9idXR0b25EZWxldGUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50c19fZGVsZXRlJyk7XHJcblxyXG4gICAgdGhpcy5fYnV0dG9uTGlrZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzX19saWtlJyk7XHJcbiAgICB0aGlzLl9saWtlc0NvdW50ZXIgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50c19fbGlrZXMtY291bnRlcicpO1xyXG4gICAgdGhpcy5fbGlrZXNDb3VudGVyLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9jb3VudExpa2VzKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICAvLyDQvNC10YLQvtC0INGB0L4g0LLRgdC10LzQuCDRgdC70YPRiNCw0YLQtdC70Y/QvNC4INC60LDRgNGC0L7Rh9C60LhcclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBpZiAoIXRoaXMuX2lzVXNlckNhcmQpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRGVsZXRlLnJlbW92ZSgpO1xyXG4gICAgICB0aGlzLl9idXR0b25EZWxldGUgPSBudWxsO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRGVsZXRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVSZW1vdmVDYXJkQ2xpY2soZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLy8gdGhpcy5fYnV0dG9uRGVsZXRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fb25EZWxldGUpO1xyXG4gICAgdGhpcy5fYnV0dG9uTGlrZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlTGlrZUNhcmRDbGljaygpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9lbGVtZW50SW1nLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluayk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vINGB0YfQtdGC0YfQuNC6INC70LDQudC60L7QslxyXG4gIF9jb3VudExpa2VzKCkge1xyXG4gICAgaWYgKHRoaXMuX2NoZWNrVXNlckxpa2VzKCkpIHtcclxuICAgICAgdGhpcy5hZGRMaWtlKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnJlbW92ZUxpa2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9jaGVja1VzZXJMaWtlcygpIHtcclxuICAgIHJldHVybiB0aGlzLl9saWtlcy5zb21lKChpdGVtKSA9PiBpdGVtLl9pZCA9PT0gdGhpcy5fdXNlcklkKTtcclxuICB9XHJcblxyXG4gIC8vINC80LXRgtC+0LQg0LvQsNC50LrQsCDQutCw0YDRgtC+0YfQutC4XHJcbiAgYWRkTGlrZSA9ICgpID0+IHtcclxuICAgIC8vIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzX19saWtlJykuY2xhc3NMaXN0LnRvZ2dsZSgnZWxlbWVudHNfX2xpa2VfYWN0aXZlJyk7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50c19fbGlrZScpLmNsYXNzTGlzdC5hZGQoJ2VsZW1lbnRzX19saWtlX2FjdGl2ZScpO1xyXG4gICAgdGhpcy5pc0xpa2VkID0gdHJ1ZTtcclxuICB9O1xyXG5cclxuICAvLyDRg9Cx0LjRgNCw0LXQvCDQu9Cw0LnQulxyXG4gIHJlbW92ZUxpa2UgPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50c19fbGlrZScpLmNsYXNzTGlzdC5yZW1vdmUoJ2VsZW1lbnRzX19saWtlX2FjdGl2ZScpO1xyXG4gICAgdGhpcy5pc0xpa2VkID0gZmFsc2U7XHJcbiAgfTtcclxuXHJcbiAgdXBkYXRlbGlrZXMoZGF0YSkge1xyXG4gICAgdGhpcy5fbGlrZXNDb3VudGVyLnRleHRDb250ZW50ID0gZGF0YS5sZW5ndGg7XHJcbiAgfVxyXG5cclxuICBnZXRDYXJkSWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZElkO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcih2YWxpZGF0aW9uQ29uZmlnLCBmb3JtKSB7XHJcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSB2YWxpZGF0aW9uQ29uZmlnLmZvcm1TZWxlY3RvcjtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSB2YWxpZGF0aW9uQ29uZmlnLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHZhbGlkYXRpb25Db25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gdmFsaWRhdGlvbkNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gdmFsaWRhdGlvbkNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gdmFsaWRhdGlvbkNvbmZpZy5lcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZm9ybSA9IGZvcm07XHJcbiAgICAvLyDQsdC10YDQtdC8INGB0L/QuNGB0L7QuiDQuNC90L/Rg9GC0L7QsiDRgSDQutC+0L3QutGA0LXRgtC90L7QuSDRhNC+0YDQvNGLXHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3Rvcik7XHJcbiAgICAvLyDQsdC10YDQtdC8INC60L3QvtC/0LrRgyDRgSDQutC+0L3QutGA0LXRgtC90L7QuSDRhNC+0YDQvNGLXHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSBmb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgLy8g0LzQtdGC0L7QtCDQv9GA0L7QstC10YDQutC4INCy0YHQtdGFINC/0L7Qu9C10Lkg0L3QsCDQstCw0LvQuNC00L3QvtGB0YLRjFxyXG4gIF9oYXNJbnZhbGlkSW5wdXQgPSAoKSA9PiB7XHJcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLl9pbnB1dExpc3QpLnNvbWUoKGlucHV0RWxlbWVudCkgPT4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCk7XHJcbiAgfTtcclxuXHJcbiAgLy8g0LzQtdGC0L7QtCDQvtGC0L7QsdGA0LDQttC10L3QuNGPINC+0YjQuNCx0LrQuFxyXG4gIF9zaG93RXJyb3IgPSBmdW5jdGlvbiAoZXJyb3JFbGVtZW50LCBpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9O1xyXG5cclxuICAvLyDQvNC10YLQvtC0INGB0LrRgNGL0YLQuNGPINC+0YjQuNCx0LrQuFxyXG4gIF9oaWRlRXJyb3IgPSBmdW5jdGlvbiAoZXJyb3JFbGVtZW50LCBpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH07XHJcblxyXG4gIC8vINC80LXRgtC+0LQg0LLRi9C30L7QstCwINC+0YLQvtCx0YDQsNC20LXQvdC40Y8v0YHQutGA0YvRgtC40Y8g0L7RiNC40LHQutC4XHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eSA9IChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG5cclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9zaG93RXJyb3IoZXJyb3JFbGVtZW50LCBpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2hpZGVFcnJvcihlcnJvckVsZW1lbnQsIGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8g0LzQtdGC0L7QtCDQv9C10YDQtdC60LvRjtGH0LXQvdC40Y8g0YHQvtGB0YLQvtGP0L3QuNC1INC60L3QvtC/0LrQuFxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQodGhpcy5faW5wdXRMaXN0KSkge1xyXG4gICAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vINC+0YLQutC70Y7Rh9C10L3QvdCw0Y8g0LrQvdC+0L/QutCwXHJcbiAgX2Rpc2FibGVCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcbiAgfVxyXG5cclxuICAvLyDQvNC10YLQvtC0INC/0YDQvtCy0LXRgNC60Lgg0LLQstC+0LTQuNC80YvRhSDQtNCw0L3QvdGL0YVcclxuICBfc2V0VmFsaWRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9zZXRWYWxpZExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgLy8g0LzQtdGC0L7QtCDRg9C00LDQu9C10L3QuNGPINC+0YjQuNCx0L7QuiDQsiDQuNC90L/Rg9GC0LDRhSDQv9GA0Lgg0L/QvtCy0YLQvtGA0L3QvtC8INC+0YLQutGA0YvRgtC40Lgg0L/QvtC/0LDQv9C+0LJcclxuICByZW1vdmVJbnB1dEVycm9ycygpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcblxyXG4gICAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICAgIHRoaXMuX2hpZGVFcnJvcihlcnJvckVsZW1lbnQsIGlucHV0RWxlbWVudCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgLy8g0L7RgtC60LvRjtGH0LXQvdC40LUg0LrQvdC+0L/QutC4INCy0L4g0LjQt9Cx0LXQttCw0L3QuNC4INC+0YLQv9GA0LDQstC60Lgg0L/Rg9GB0YLQvtC5INC60LDRgNGC0L7Rh9C60LhcclxuICAgIHRoaXMuX2Rpc2FibGVCdXR0b24oKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2J1dHRvbkNsb3NlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UtYnRuJyk7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZShlKSB7XHJcbiAgICBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYW5kbGVPdmVybGF5Q2xvc2UgPSAoZSkgPT4ge1xyXG4gICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfb3BlbmVkJykgfHwgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9fY2xvc2UtYnV0dG9uJykpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fYnV0dG9uQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuX2hhbmRsZU92ZXJsYXlDbG9zZSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSAnLi9Qb3B1cC5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdEZvcm0pIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0Rm9ybSA9IGhhbmRsZVN1Ym1pdEZvcm07XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19lZGl0LWZvcm0nKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2lucHV0Jyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19zYXZlLWJ0bicpO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgdGhpcy5faW5wdXRWYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICB0aGlzLl9pbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRWYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXRGb3JtKHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJMb2FkaW5nQnRuKGlzTG9hZGluZywgbG9hZGluZ1RleHQpIHtcclxuICAgIGlzTG9hZGluZyA/ICh0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nKSA6ICh0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBsb2FkaW5nVGV4dCk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0ICcuL2luZGV4LmNzcyc7XHJcbmltcG9ydCB7XHJcbiAgYXBpQ29uZmlnLFxyXG4gIG5hbWVTZWxlY3RvcixcclxuICBhYm91dFNlbGVjdG9yLFxyXG4gIGF2YXRhclNlbGVjdG9yLFxyXG4gIHBvcHVwRWRpdEZvcm0sXHJcbiAgYWRkRm9ybSxcclxuICBhdmF0YXJGb3JtLFxyXG4gIGVkaXRCdG4sXHJcbiAgYWRkQnRuLFxyXG4gIGVkaXRBdmF0YXJCdG4sXHJcbiAgcHJvZmlsZUZvcm1FZGl0QnRuLFxyXG4gIGNyZWF0ZUNhcmRCdG4sXHJcbiAgZWxlbWVudHNMaXN0LFxyXG4gIHZhbGlkYXRpb25Db25maWcsXHJcbn0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcclxuaW1wb3J0IENhcmQgZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJztcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJztcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJztcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnO1xyXG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzJztcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4uL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xyXG5pbXBvcnQgQXBpIGZyb20gJy4uL2NvbXBvbmVudHMvQXBpLmpzJztcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoYXBpQ29uZmlnKTtcclxuXHJcbi8vINGN0LrQt9C10LzQv9C70Y/RgCDQv9GA0L7RhNC40LvRj1xyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7IG5hbWU6IG5hbWVTZWxlY3RvciwgYWJvdXQ6IGFib3V0U2VsZWN0b3IsIGF2YXRhcjogYXZhdGFyU2VsZWN0b3IgfSk7XHJcblxyXG4vLyDRjdC60LfQtdC80L/Qu9GP0YAg0L/QvtC/0LDQv9CwLCDQutC+0YLQvtGA0YvQuSDRg9GC0L7Rh9C90Y/QtdGCLCDRg9C00LDQu9GP0YLRjCDQu9C4INC60LDRgNGC0L7Rh9C60YNcclxuY29uc3QgcG9wdXBXaXRoQ29uZmlybWF0aW9uID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbih7IHBvcHVwU2VsZWN0b3I6ICcuY29uZmlybS1wb3B1cCcgfSk7XHJcbnBvcHVwV2l0aENvbmZpcm1hdGlvbi5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8g0Y3QutC30LXQvNC/0LvRj9GAINC/0L7Qv9Cw0L/QsCDQutCw0YDRgtC40L3QutC4XHJcbmNvbnN0IHBvcHVwSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoeyBwb3B1cFNlbGVjdG9yOiAnLnBvcHVwX3R5cGVfb3Blbi1pbWcnIH0pO1xyXG5wb3B1cEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyDQstCw0LvQuNC00LDRhtC40Y8g0LjQvdC/0YPRgtC+0LIg0L/RgNC4INGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Lgg0L/RgNC+0YTQuNC70Y9cclxuY29uc3QgcHJvZmlsZVZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBwb3B1cEVkaXRGb3JtKTtcclxucHJvZmlsZVZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4vLyDQstCw0LvQuNC00LDRhtC40Y8g0LjQvdC/0YPRgtCwINC40LfQvNC10L3QtdC90LjRjyDQsNCy0LDRgtCw0YDQutC4INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG5jb25zdCBhdmF0YXJWYWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgYXZhdGFyRm9ybSk7XHJcbmF2YXRhclZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4vLyDQstCw0LvQuNC00LDRhtC40Y8g0LjQvdC/0YPRgtC+0LIg0L/RgNC4INC00L7QsdCw0LLQu9C10L3QuNC4INC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuFxyXG5jb25zdCBhZGRDYXJkVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIGFkZEZvcm0pO1xyXG5hZGRDYXJkVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vLyDQn9C+0LvRg9GH0LXQvdC40LUg0YPQstGA0YLQvtGH0LXQuiDQuCDQtNCw0L3QvdGL0YUg0L/RgNC+0YTQuNC70Y8g0YEg0YHQtdGA0LLQtdGA0LBcclxuYXBpXHJcbiAgLmdldEFsbERhdGEoKVxyXG4gIC50aGVuKChbdXNlckRhdGEsIGl0ZW1zXSkgPT4ge1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oeyBuYW1lOiB1c2VyRGF0YS5uYW1lLCBhYm91dDogdXNlckRhdGEuYWJvdXQsIGF2YXRhcjogdXNlckRhdGEuYXZhdGFyLCB1c2VySWQ6IHVzZXJEYXRhLl9pZCB9KTtcclxuICAgIHJlbmRlckNhcmRzLnJlbmRlckl0ZW1zKGl0ZW1zKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LAg0L/RgNC4INC30LDQs9GA0YPQt9C60LUg0LjRgdGF0L7QtNC90YvRhSDQtNCw0L3QvdGL0YU6ICR7ZXJyb3J9YCk7XHJcbiAgfSk7XHJcblxyXG4vLyDQntGC0YDQuNGB0L7QstC60LAg0LrQsNGA0YLQvtGH0LXQuiDRgSDRgdC10YDQstC10YDQsFxyXG5jb25zdCByZW5kZXJDYXJkcyA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIHJlbmRlcmVyOiAoY2FyZERhdGEpID0+IHtcclxuICAgICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKHtcclxuICAgICAgICBjYXJkRGF0YSxcclxuICAgICAgICB0ZW1wbGF0ZVNlbGVjdG9yOiAnI2VsZW1lbnRzLXRlbXBsYXRlJyxcclxuICAgICAgICB1c2VySWQ6IHVzZXJJbmZvLmdldFVzZXJJZCgpLFxyXG4gICAgICAgIGhhbmRsZUNhcmRDbGljazogKG5hbWUsIGxpbmspID0+IHtcclxuICAgICAgICAgIHBvcHVwSW1hZ2Uub3BlbihuYW1lLCBsaW5rKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGhhbmRsZUxpa2VDYXJkQ2xpY2s6ICgpID0+IHtcclxuICAgICAgICAgIGlmIChjYXJkLmlzTGlrZWQpIHtcclxuICAgICAgICAgICAgYXBpXHJcbiAgICAgICAgICAgICAgLmRlbGV0ZUNhcmRMaWtlKGNhcmQuZ2V0Q2FyZElkKCkpXHJcbiAgICAgICAgICAgICAgLnRoZW4oKGNhcmREYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjYXJkLnJlbW92ZUxpa2UoKTtcclxuICAgICAgICAgICAgICAgIGNhcmQudXBkYXRlbGlrZXMoY2FyZERhdGEubGlrZXMpO1xyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGFwaVxyXG4gICAgICAgICAgICAgIC5saWtlQ2FyZChjYXJkLmdldENhcmRJZCgpKVxyXG4gICAgICAgICAgICAgIC50aGVuKChjYXJkRGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY2FyZC5hZGRMaWtlKCk7XHJcbiAgICAgICAgICAgICAgICBjYXJkLnVwZGF0ZWxpa2VzKGNhcmREYXRhLmxpa2VzKTtcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBoYW5kbGVSZW1vdmVDYXJkQ2xpY2s6IChlKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5lbGVtZW50c19faXRlbScpO1xyXG4gICAgICAgICAgcG9wdXBXaXRoQ29uZmlybWF0aW9uLm9wZW4oKTtcclxuICAgICAgICAgIHBvcHVwV2l0aENvbmZpcm1hdGlvbi5zZXRTdWJtaXRIYW5kbGVyKCgpID0+IHtcclxuICAgICAgICAgICAgYXBpXHJcbiAgICAgICAgICAgICAgLnJlbW92ZUNhcmQoY2FyZC5nZXRDYXJkSWQoKSlcclxuICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIHBvcHVwV2l0aENvbmZpcm1hdGlvbi5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxuICAgIH0sXHJcbiAgfSxcclxuICBlbGVtZW50c0xpc3RcclxuKTtcclxuXHJcbi8vINC40LfQvNC10L3QtdC90LjQtSDQsNCy0LDRgtCw0YDQsCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cclxuY29uc3QgdXBkYXRlVXNlckF2YXRhclBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oeyBwb3B1cFNlbGVjdG9yOiAnLmF2YXRhci1wb3B1cCcgfSwgKGZvcm1EYXRhKSA9PiB7XHJcbiAgdXBkYXRlVXNlckF2YXRhclBvcHVwLnJlbmRlckxvYWRpbmdCdG4odHJ1ZSk7XHJcbiAgYXBpXHJcbiAgICAudXBkYXRlVXNlckF2YXRhcihmb3JtRGF0YSlcclxuICAgIC50aGVuKChmb3JtRGF0YSkgPT4ge1xyXG4gICAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHsgbmV3VXNlckF2YXRhcjogZm9ybURhdGEuYXZhdGFyIH0pO1xyXG4gICAgICB1cGRhdGVVc2VyQXZhdGFyUG9wdXAuY2xvc2UoKTtcclxuICAgICAgYXZhdGFyRm9ybS5yZXNldCgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICB1cGRhdGVVc2VyQXZhdGFyUG9wdXAucmVuZGVyTG9hZGluZ0J0bihmYWxzZSk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG51cGRhdGVVc2VyQXZhdGFyUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmVkaXRBdmF0YXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgYXZhdGFyVmFsaWRhdGlvbi5yZW1vdmVJbnB1dEVycm9ycygpO1xyXG4gIHVwZGF0ZVVzZXJBdmF0YXJQb3B1cC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuLy8g0JjQt9C80LXQvdC10L3QuNC1INC00LDQvdC90YvRhSDQv9GA0L7RhNC40LvRj1xyXG5jb25zdCBwcm9maWxlRWRpdFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oeyBwb3B1cFNlbGVjdG9yOiAnLnByb2ZpbGUtcG9wdXAnIH0sIChmb3JtVmFsdWVzKSA9PiB7XHJcbiAgcHJvZmlsZUVkaXRQb3B1cC5yZW5kZXJMb2FkaW5nQnRuKHRydWUpO1xyXG4gIGFwaVxyXG4gICAgLnVwZGF0ZVVzZXJJbmZvKGZvcm1WYWx1ZXMpXHJcbiAgICAudGhlbigoZm9ybVZhbHVlcykgPT4ge1xyXG4gICAgICB1c2VySW5mby5uZXdVc2VySW5mbyhmb3JtVmFsdWVzKTtcclxuICAgICAgcHJvZmlsZUVkaXRQb3B1cC5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsDogJHtlcnJvcn0gLSDQvdC1INGD0LTQsNC70L7RgdGMINC+0LHQvdC+0LLQuNGC0Ywg0L/RgNC+0YTQuNC70YxgKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHByb2ZpbGVFZGl0UG9wdXAucmVuZGVyTG9hZGluZ0J0bihmYWxzZSwgcHJvZmlsZUZvcm1FZGl0QnRuLnZhbHVlKTtcclxuICAgIH0pO1xyXG59KTtcclxucHJvZmlsZUVkaXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8g0YHQu9GD0YjQsNGC0LXQu9GMINC90LAg0L7RgtC60YDRi9GC0LjQtSDQv9C+0L/QsNC/0LAg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQv9GA0L7RhNC40LvRjyDQuCDQv9C+0LTQs9GA0YPQt9C60LAg0YLQtdC60YPRidC40YUg0LTQsNC90L3Ri9GFINC/0YDQvtGE0LjQu9GPINCyINC40L3Qv9GD0YLRi1xyXG5lZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIHByb2ZpbGVWYWxpZGF0aW9uLnJlbW92ZUlucHV0RXJyb3JzKCk7XHJcbiAgY29uc3QgdXNlckRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIHByb2ZpbGVFZGl0UG9wdXAuc2V0SW5wdXRWYWx1ZXModXNlckRhdGEpO1xyXG4gIHByb2ZpbGVFZGl0UG9wdXAub3BlbigpO1xyXG59KTtcclxuXHJcbi8vINCU0L7QsdCw0LLQu9C10L3QuNC1INC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuFxyXG5jb25zdCBhZGRDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7IHBvcHVwU2VsZWN0b3I6ICcuYWRkLXBvcHVwJyB9LCAoaW5wdXRWYWx1ZXMpID0+IHtcclxuICBhZGRDYXJkUG9wdXAucmVuZGVyTG9hZGluZ0J0bih0cnVlKTtcclxuICBhcGlcclxuICAgIC5hZGROZXdDYXJkKGlucHV0VmFsdWVzKVxyXG4gICAgLnRoZW4oKGlucHV0VmFsdWVzKSA9PiB7XHJcbiAgICAgIHJlbmRlckNhcmRzLmFkZEl0ZW0oaW5wdXRWYWx1ZXMpO1xyXG4gICAgICBhZGRDYXJkUG9wdXAuY2xvc2UoKTtcclxuICAgICAgYWRkRm9ybS5yZXNldCgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsDogJHtlcnJvcn0gLSDQvdC1INGD0LTQsNC70L7RgdGMINC00L7QsdCw0LLQuNGC0Ywg0L3QvtCy0YPRjiDQutCw0YDRgtC+0YfQutGDYCk7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBhZGRDYXJkUG9wdXAucmVuZGVyTG9hZGluZ0J0bihmYWxzZSwgY3JlYXRlQ2FyZEJ0bi52YWx1ZSk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5hZGRDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vINGB0LvRg9GI0LDRgtC10LvRjCDQvdCwINC+0YLQutGA0YvRgtC40LUg0L/QvtC/0LDQv9CwINC00L7QsdCw0LLQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60LhcclxuYWRkQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIGFkZENhcmRWYWxpZGF0aW9uLnJlbW92ZUlucHV0RXJyb3JzKCk7XHJcbiAgYWRkQ2FyZFBvcHVwLm9wZW4oKTtcclxufSk7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tSZXNwb25zZShyZXMpIHtcclxuICAgIGlmIChyZXMub2spIHtcclxuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfSAtINC90LUg0YPQtNCw0LvQvtGB0Ywg0YPRgdGC0LDQvdC+0LLQuNGC0Ywg0L/QvtC00LrQu9GO0YfQtdC90LjQtSDQuiBhcGlgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9dXNlcnMvbWVgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlVXNlckluZm8oZGF0YSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9dXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lOiBkYXRhLm5hbWUsIGFib3V0OiBkYXRhLmFib3V0IH0pLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZVVzZXJBdmF0YXIoZGF0YSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9dXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGdldENhcmRzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9Y2FyZHNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgYWRkTmV3Q2FyZCh7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9Y2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWUsIGxpbmsgfSksXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfWNhcmRzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBsaWtlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfWNhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkTGlrZShjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfWNhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBnZXRBbGxEYXRhKCkge1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldFVzZXJJbmZvKCksIHRoaXMuZ2V0Q2FyZHMoKV0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IodXNlckluZm8pIHtcclxuICAgIHRoaXMuX25hbWUgPSB1c2VySW5mby5uYW1lO1xyXG4gICAgdGhpcy5fYWJvdXQgPSB1c2VySW5mby5hYm91dDtcclxuICAgIHRoaXMuX2F2YXRhciA9IHVzZXJJbmZvLmF2YXRhcjtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgYWJvdXQ6IHRoaXMuX2Fib3V0LnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHVzZXJEYXRhKSB7XHJcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gdXNlckRhdGEubmFtZTtcclxuICAgIHRoaXMuX2Fib3V0LnRleHRDb250ZW50ID0gdXNlckRhdGEuYWJvdXQ7XHJcbiAgICB0aGlzLl9hdmF0YXIuc3JjID0gdXNlckRhdGEuYXZhdGFyO1xyXG4gICAgdGhpcy5fdXNlcklkID0gdXNlckRhdGEudXNlcklkO1xyXG4gIH1cclxuXHJcbiAgbmV3VXNlckluZm8oeyBuYW1lLCBhYm91dCB9KSB7XHJcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX2Fib3V0LnRleHRDb250ZW50ID0gYWJvdXQ7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VyQXZhdGFyKHsgbmV3VXNlckF2YXRhciB9KSB7XHJcbiAgICB0aGlzLl9hdmF0YXIuc3JjID0gbmV3VXNlckF2YXRhcjtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl91c2VySWQ7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSAnLi9Qb3B1cC5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jb25maXJtJyk7XHJcbiAgfVxyXG5cclxuICBzZXRTdWJtaXRIYW5kbGVyKG5ld0Zvcm1TdWJtaXQpIHtcclxuICAgIHRoaXMuX2Zvcm1TdWJtaXQgPSBuZXdGb3JtU3VibWl0O1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5fZm9ybVN1Ym1pdCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSAnLi9Qb3B1cC5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX25hbWUgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWctdGl0bGUnKTtcclxuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1nJyk7XHJcbiAgfVxyXG5cclxuICBvcGVuKG5hbWUsIGxpbmspIHtcclxuICAgIHN1cGVyLm9wZW4obmFtZSwgbGluayk7XHJcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX2ltYWdlLnNyYyA9IGxpbms7XHJcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSAn0JrQsNGA0YLQuNC90LrQsCAnICsgbmFtZTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoaXRlbXMpIHtcclxuICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5hZGRJdGVtKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGl0ZW0pIHtcclxuICAgIGNvbnN0IGNhcmQgPSB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGNhcmQpO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiYWRkUG9wdXAiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJwb3B1cEVkaXRGb3JtIiwiYWRkRm9ybSIsImF2YXRhckZvcm0iLCJlZGl0QnRuIiwiYWRkQnRuIiwiZWRpdEF2YXRhckJ0biIsIm5hbWVTZWxlY3RvciIsImFib3V0U2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsInByb2ZpbGVGb3JtRWRpdEJ0biIsImNyZWF0ZUNhcmRCdG4iLCJ2YWxpZGF0aW9uQ29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJDYXJkIiwiY29uc3RydWN0b3IiLCJfcmVmIiwiY2FyZERhdGEiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwidXNlcklkIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlTGlrZUNhcmRDbGljayIsImhhbmRsZVJlbW92ZUNhcmRDbGljayIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfbGlrZXMiLCJsaWtlcyIsIl9jYXJkSWQiLCJfaWQiLCJfdGVtcGxhdGVTZWxlY3RvciIsIl91c2VySWQiLCJfaXNVc2VyQ2FyZCIsIm93bmVyIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVMaWtlQ2FyZENsaWNrIiwiX2hhbmRsZVJlbW92ZUNhcmRDbGljayIsIl9nZXRUZW1wbGF0ZSIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJnZW5lcmF0ZUNhcmQiLCJfZWxlbWVudCIsIl9lbGVtZW50SW1nIiwidGV4dENvbnRlbnQiLCJzcmMiLCJhbHQiLCJfYnV0dG9uRGVsZXRlIiwiX2J1dHRvbkxpa2UiLCJfbGlrZXNDb3VudGVyIiwibGVuZ3RoIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2NvdW50TGlrZXMiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInJlbW92ZSIsIl9jaGVja1VzZXJMaWtlcyIsImFkZExpa2UiLCJyZW1vdmVMaWtlIiwic29tZSIsIml0ZW0iLCJjbGFzc0xpc3QiLCJhZGQiLCJpc0xpa2VkIiwidXBkYXRlbGlrZXMiLCJkYXRhIiwiZ2V0Q2FyZElkIiwiRm9ybVZhbGlkYXRvciIsImZvcm0iLCJfZm9ybVNlbGVjdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIl9mb3JtIiwiX2lucHV0TGlzdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfc3VibWl0QnV0dG9uIiwiX2hhc0ludmFsaWRJbnB1dCIsIkFycmF5IiwiZnJvbSIsImlucHV0RWxlbWVudCIsInZhbGlkaXR5IiwidmFsaWQiLCJfc2hvd0Vycm9yIiwiZXJyb3JFbGVtZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsImlkIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2Rpc2FibGVCdXR0b24iLCJyZW1vdmVBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJfc2V0VmFsaWRMaXN0ZW5lcnMiLCJmb3JFYWNoIiwiZW5hYmxlVmFsaWRhdGlvbiIsInJlbW92ZUlucHV0RXJyb3JzIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9idXR0b25DbG9zZSIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5IiwiX2hhbmRsZU92ZXJsYXlDbG9zZSIsInRhcmdldCIsImNvbnRhaW5zIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlU3VibWl0Rm9ybSIsInN1cGVyIiwiX2hhbmRsZVN1Ym1pdEZvcm0iLCJfcG9wdXBGb3JtIiwiX2dldElucHV0VmFsdWVzIiwiX2lucHV0VmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInNldElucHV0VmFsdWVzIiwicHJldmVudERlZmF1bHQiLCJyZW5kZXJMb2FkaW5nQnRuIiwiaXNMb2FkaW5nIiwibG9hZGluZ1RleHQiLCJyZXNldCIsImFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsIl9jaGVja1Jlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImdldFVzZXJJbmZvIiwiZmV0Y2giLCJ0aGVuIiwidXBkYXRlVXNlckluZm8iLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFib3V0IiwidXBkYXRlVXNlckF2YXRhciIsImdldENhcmRzIiwiYWRkTmV3Q2FyZCIsIl9yZWYyIiwicmVtb3ZlQ2FyZCIsImNhcmRJZCIsImxpa2VDYXJkIiwiZGVsZXRlQ2FyZExpa2UiLCJnZXRBbGxEYXRhIiwiYWxsIiwiYXV0aG9yaXphdGlvbiIsInVzZXJJbmZvIiwiX2Fib3V0IiwiX2F2YXRhciIsImF2YXRhciIsInNldFVzZXJJbmZvIiwidXNlckRhdGEiLCJuZXdVc2VySW5mbyIsInNldFVzZXJBdmF0YXIiLCJuZXdVc2VyQXZhdGFyIiwiZ2V0VXNlcklkIiwicG9wdXBXaXRoQ29uZmlybWF0aW9uIiwic2V0U3VibWl0SGFuZGxlciIsIm5ld0Zvcm1TdWJtaXQiLCJfZm9ybVN1Ym1pdCIsInBvcHVwSW1hZ2UiLCJfaW1hZ2UiLCJwcm9maWxlVmFsaWRhdGlvbiIsImF2YXRhclZhbGlkYXRpb24iLCJhZGRDYXJkVmFsaWRhdGlvbiIsIml0ZW1zIiwicmVuZGVyQ2FyZHMiLCJyZW5kZXJJdGVtcyIsImNhdGNoIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJhZGRJdGVtIiwiY2FyZCIsInByZXBlbmQiLCJlcnIiLCJjYXJkRWxlbWVudCIsImNsb3Nlc3QiLCJ1cGRhdGVVc2VyQXZhdGFyUG9wdXAiLCJmb3JtRGF0YSIsImZpbmFsbHkiLCJwcm9maWxlRWRpdFBvcHVwIiwiZm9ybVZhbHVlcyIsImFkZENhcmRQb3B1cCIsImlucHV0VmFsdWVzIl0sInNvdXJjZVJvb3QiOiIifQ==